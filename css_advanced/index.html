<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Feedback Form</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    .error {
      color: red;
      font-size: 0.9em;
    }
    input, textarea {
      display: block;
      margin-bottom: 10px;
      width: 300px;
    }
  </style>
</head>
<body>

  <h2>Feedback Form</h2>

  <form id="feedbackForm">
    <label>Email:
      <input type="email" id="email" required>
      <div id="emailError" class="error"></div>
    </label>

    <label>Age:
      <input type="number" id="age" required>
      <div id="ageError" class="error"></div>
    </label>

    <label>Message:
      <textarea id="message" rows="6" required></textarea>
      <div id="wordCount"></div>
      <div id="charCount"></div>
      <div id="messageError" class="error"></div>
    </label>

    <button type="submit">Submit</button>
  </form>

  <script>
    const form = document.getElementById('feedbackForm');
    const emailInput = document.getElementById('email');
    const ageInput = document.getElementById('age');
    const messageInput = document.getElementById('message');

    const emailError = document.getElementById('emailError');
    const ageError = document.getElementById('ageError');
    const messageError = document.getElementById('messageError');
    const wordCount = document.getElementById('wordCount');
    const charCount = document.getElementById('charCount');

    form.addEventListener('submit', function(event) {
      event.preventDefault(); // Prevent default form submission

      // Clear previous errors
      emailError.textContent = '';
      ageError.textContent = '';
      messageError.textContent = '';

      let valid = true;

      // Validate Email
      const email = emailInput.value.trim();
      const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailPattern.test(email)) {
        emailError.textContent = 'Please enter a valid email address.';
        valid = false;
      }

      // Validate Age
      const age = parseInt(ageInput.value.trim(), 10);
      if (isNaN(age) || age < 18 || age > 99) {
        ageError.textContent = 'Age must be a number between 18 and 99.';
        valid = false;
      }

      // Validate Message
      const message = messageInput.value.trim();
      const words = message.split(/\s+/).filter(word => word.length > 0);
      const characters = message.length;

      wordCount.textContent = `Words: ${words.length}/100`;
      charCount.textContent = `Characters: ${characters}/5000`;

      if (words.length > 100) {
        messageError.textContent = 'Message must not exceed 100 words.';
        valid = false;
      }

      if (characters > 5000) {
        messageError.textContent += ' Message must not exceed 5000 characters.';
        valid = false;
      }

      if (valid) {
        alert('Form submitted successfully!');
        form.reset();
        wordCount.textContent = '';
        charCount.textContent = '';
      }
    });

    // Optional: Live count updates
    messageInput.addEventListener('input', () => {
      const words = messageInput.value.trim().split(/\s+/).filter(word => word.length > 0);
      const characters = messageInput.value.length;
      wordCount.textContent = `Words: ${words.length}/100`;
      charCount.textContent = `Characters: ${characters}/5000`;
    });
  </script>

</body>
</html>
